---
layout: post
title: Rich Text Editor in Mootools
date: '2009-03-13T13:19:00-07:00'
tags:
- javascript
- mootools
tumblr_url: http://seanmonstar.com/post/706995594/rich-text-editor-in-mootools
---
<p>With the release of Firefox 3, we find all major browsers now support a single interface (mostly) for allowing the Browser to do all of our Rich Text editting needs.  This allows us to set a single property, contentEditable, and then that element accepts rich text processing.  No more loading in an iframe, having document.domain issues, and having little control over the style of the iframe.  This, however, does mean Firefox 2 and below are excluded from the party.</p>
<h4>Midas API</h4>
<p>In Firefox 3, they call it <a target="_blank" href="https://developer.mozilla.org/En/Midas">Midas</a> , and it&rsquo;s a series of simple commands that mimic what Internet Explorer has <a target="_blank" href="http://msdn.microsoft.com/en-us/library/ms533049(VS.85).aspx">had for several versions</a> .  And it&rsquo;s all called through a simple command:</p>
<p>document.execCommand(&lsquo;bold&rsquo;,null,null);</p>
<p>The above would make anything selected in an editable element become bold, or if no selection, make the next things you type be in bold.  Just like you&rsquo;d expect in Word or some such.   So the amount of Javascript that has to happen is minimal, allowing the browser to do most of the work (which is faster than Javascript interpreting and processing).</p>
<p><img src="http://media.tumblr.com/tumblr_l458h9Xfdz1qzek7l.png"/></p>
<p>What&rsquo;s most exciting to me, is that since so little Javascript is needed to do most every command, <em>the project isn&rsquo;t huge and unwieldy</em> .  It allows for more of the project to be aimed at a killer interface.  (Mine isn&rsquo;t.)  It also makes it very easy to edit, and add new buttons, since the use of a button is mostly centered around the document.execCommand function.</p>
<p>What&rsquo;s nice about the ease, is that we were able to use a similar solution in Prototype for <a target="_blank" href="http://blazonco.com">our content editor</a> , and it&rsquo;s very easy to add a button that allows picture selection, instead of typing in a picture url.</p>
<h4>Download</h4>
<p>Demo and code is hosted on <a target="_blank" href="http://github.com/seanmonstar/moo-rte">github</a>.</p>
<h4>Volunteers?</h4>
<p>This is an early build, prompted by <a target="_blank" href="http://og5.net/christoph/">Chris</a>, and isn&rsquo;t perfectly polished.  But it does get the job down.  It could do with a nicer looking toolbar.  And I&rsquo;d like to get the Range and Selection API&rsquo;s working, so that you don&rsquo;t have to use the boring prompt box to insert links.  If you try to use a modal prompt, since its the in the same window, the selection will change when the user types in the link, and will no longer insert the link around the (now un-)selected text.</p>
<p>Anyone can use it as is.  And if you have suggestions, leave them in the comments and I&rsquo;ll try to work them in.</p>
