---
layout: post
title: Don't Use the DOM to Insert Flash
date: '2009-04-21T07:46:00-07:00'
tags:
- javascript
- flash
- bug
tumblr_url: http://seanmonstar.com/post/707145908/dont-use-the-dom-to-insert-flash
---
<p>I didn&rsquo;t have the priviledge of using SWFObject or the likes. I just needed to create a movie in a modal-like window that depended on the page you were on. So, taking a list of properties and params, I proceed to use the DOM methods to build my Object and Param tags. Well, <a target="_blank" href="http://prototypejs.org">Prototype</a> &rsquo;s Element methods, actually. It worked in Firefox, and partially in Safari / Chrome, and none at all in Internet Explorer 7.</p>
<p>So then, a little research shows that all the Javascript solutions for inserting a video object doesn&rsquo;t use Element at all. It would seem that extends the HTMLObjectElement cause problems. The solution: <em>simply write the HTML into a string, and set the innerHTML of an Element to your object.</em></p>
<p>Here&rsquo;s how Mootools handles it in its <a target="_blank" href="http://mootools.net/docs/Utilities/Swiff">Swiff class</a> :</p>
<pre><code>var build = '&lt;object id="' + id + '"';for (var property in properties) build += ' ' + property + '="' + properties[property] + '"';build += '&gt;';
for (var param in params){    
	if (params[param]) 
		build += '&lt;param name="' + param + '" value="' + params[param] + '" /&gt;';
}
build += '&lt;/object&gt;';</code></pre>
