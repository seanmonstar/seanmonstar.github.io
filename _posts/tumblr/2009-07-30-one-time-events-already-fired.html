---
layout: post
title: 'One Time Events: Already Fired?'
date: '2009-07-30T13:18:00-04:00'
tags: []
tumblr_url: https://seanmonstar.com/post/707073408/one-time-events-already-fired
---
<p><a target="_blank" href="http://en.wikipedia.org/wiki/Batch_programming">Batch programming</a> is certainly very easy to understand and write.  You order a todo list and give it to the compiler/interpreter.  It&rsquo;s what&rsquo;s usually taught first when you learn to program, and even in some server-side languages, you batch program (PHP doesn&rsquo;t have events at all, for instance). However, persitance applications that live on the desktop (and perhaps Ajax applications with minimal page refreshes) rely on <a target="_blank" href="http://en.wikipedia.org/wiki/Event-driven_programming">event-driven programming</a>.  You set up a user interface, and then wait for the user to do something to that interface, and then respond to the event.</p>
<p>This is all well and great.  But I&rsquo;ve hit a problem a couple times recently as I create more desktop applications.  I thought this would be easy to find, since I&rsquo;ve hit the problem often and early. But I haven&rsquo;t, so I&rsquo;ll have to solve it myself.  Sometimes, a component might have a one-time event that you need to listen to, and you don&rsquo;t know if that event has fired or not.</p>
<p>As an example, I have a Database object that builds and connects, and while the Object reference is available immediately, if I send any requests to it before it&rsquo;s connected, it errors.  So naturally, I can listen for the <code>connect</code> event.  Unfortunately, This has 2 problems, since the <code>connect</code> event will only fire once, shortly after instantiation.</p>
<ul><li>What if the event fires before I attach the listener?</li>
<li>I want to run a method multiple times in the application, so an event that fires once limits the execution of those event listeners.</li>
</ul><p>If the Database was particularly quick in connecting, it&rsquo;s possible the <code>connect</code> event will have fired before we get to the code that sets up the connect event listener.  Since <code>connect</code> will never fire again, our function will never fire.</p>
<p><figure class="tmblr-full" data-orig-height="200" data-orig-width="500"><img src="https://64.media.tumblr.com/f6bfb541d3b2ca2e1ec1fefe8a88343a/d8e8a51f7cd1f451-f1/s540x810/229382dc2a4bfa4b919e8b885e71fa16229c3d9d.png" data-orig-height="200" data-orig-width="500"/></figure></p>
<p>This is similar to Javascript, where if you listen for the window.onload event after the page has loaded, you&rsquo;re never going to execute.  At least in MooTools, they solve this by having the domready event check every time you attach a listener, determine if the event has already fired, and if so, execute the listener immediately.</p>
<p>It&rsquo;s that exact kind of behavior I expected to be easily possible.  Here&rsquo;s what I wanted: After instantiating my Database, later in the program when I access that reference, and try to make a query, or access something else otherwise forbidden, I&rsquo;d like for it to automatically check for me if it&rsquo;s accessible, or loaded, or connected, or whatever.  If it has, execute my commands immediately.  If it hasn&rsquo;t, then assign it as an event listener.  This would allow me to call this code again later, and not provide a different part for when I expect the database to be fully setup already.</p>
<p>Am I asking too much?  I don&rsquo;t think so.  <em>My goal in programming is always to take anything I do repetitively, and make it happen automatically</em>.  I don&rsquo;t think I should have to write a check to see if something has loaded, and if not, load it and attach a listener, otherwise do now.  It&rsquo;s the same behavior in every instance.  Perhaps some sort of addition attachListener code should be wrapped up.  Or! or, using getters could also be a cool solution.  I&rsquo;ll have to do my research, and share my solution later as I find it.</p>
<p><strong>Have you solved this before?</strong></p>
