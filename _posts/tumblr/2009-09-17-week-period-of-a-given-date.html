---
layout: post
title: Week Period of a Given Date
date: '2009-09-17T08:00:00-07:00'
tags:
- php
tumblr_url: http://seanmonstar.com/post/708814441/week-period-of-a-given-date
---
<p>As I work on an internal time tracker for our company, I needed to show all the TimeEntries for a specified week. To specify which week, it made sense to simply select 1 day in the week, since that&rsquo;s the easiest default control in Flex. This let&rsquo;s me get Sunday and Saturday, the start and end of the week, so I can build a query that grabs entries between those 2 dates.</p>
<h4>In PHP</h4>
<pre><code>$dayOfWeek = date('w', $date);
$secondsInDay = 60 * 60 * 24;
$sunday = date('Y-m-d', $date - ($dayOfWeek * $secondsInDay));
$saturday = date('Y-m-d', $date + ((6 - $dayOfWeek) * $secondsInDay));
$entries = TimeEntry::find(array('timestamp =&lt;' =&gt; $saturday,'timestamp &gt;=' =&gt; $sunday));</code></pre>
<h4>In English</h4>
<p>First off, PHP&rsquo;s <a target="_blank" href="http://us2.php.net/manual/en/function.date.php">date</a> method can be given a parameter to return the numerical day of the week. So, if $date were today, we&rsquo;d be storing 4 (Sunday is 0). Now, with just a little bit of math, we can subtract the number of days to get Sunday, and add the difference to get Saturday.</p>
<p>That last bit is a <a target="_blank" href="http://en.wikipedia.org/wiki/Modelviewcontroller">data model</a> searching for all entries between those dates.</p>
