---
layout: post
title: Exploring Javascript Date Math
date: '2009-09-22T07:25:00-07:00'
tags:
- javascript
tumblr_url: http://seanmonstar.com/post/708726028/exploring-javascript-date-math
---
<p>Dates are a peculiar type of data that we have to work with. In some sense, they aren&rsquo;t a number, but instead are a combination of month, day, and year. But at the same time, in most programming languages, they are fundamentally a number: the number of seconds since the <a target="_blank" href="http://en.wikipedia.org/wiki/Unix_epoch">Unix epoch</a>.</p>
<p>In our heads, it&rsquo;s quite easy to do Date math. Moving forward a week requires just adding 7 days. How would you do that with a Javascript Date? Programming languages usually try to make working with Dates as logical as it is to do in our heads. So I a little surprised at an irregularity in using Dates in my math.</p>
<p>Though to be fair, it seems I could blame it on Javascript&rsquo;s decision to make the addition operator and concatenation operator the same symbol. I only did some quick, sloppy tests in Firefox 3.5 and Chrome 3.</p>
<h4>Adding to Dates</h4>
<p>I first wanted to move a date forward a week, so I thought that perhaps I could add 7 days worth of milliseconds to the date to get next week. Go ahead and try it:</p>
<pre><code>new Date() + (1000 * 60 * 60 * 24 * 7)</code></pre>
<p>The value is a string: &ldquo;Fri Sep 18 2009 16:37:01 GMT-0700 (Pacific Daylight Time)604800000&rdquo;. Yup, there it is! Our week&rsquo;s worth of milliseconds, attached on the end of a Date string. It would seem that Javascript decides that the Date should be evaluated as a string instead of a number at that point.</p>
<h5>How To Add</h5>
<p>In order to add to Dates, I had to create a new Date, using the value returned from <a target="_blank" href="https://developer.mozilla.org/en/Core_JavaScript_1.5_Reference/Objects/Date/getTime">getTime</a>Â and adding milliseconds to it, and using that new (humongous) number in the constructor.</p>
<pre><code>var nextWeek = new Date(today.getTime() + 1000 * 60 * 60 * 24 * 7);</code></pre>
<p>This is because the Date&rsquo;s toString method is being evaluated instead of it&rsquo;s valueOf. We can also overcome that with an additional plus sign.</p>
<pre>+(new Date()) + (1000 * 60 * 60 * 24 * 7)</pre>
<p>Also to keep in mind here, is that unlike in, say, PHP where you provide seconds to the <a target="_blank" href="http://php.net/date">date</a> function, in Javascript, you must provide <em>milliseconds</em>, hence the extra 1000 in there.</p>
<h4>Subtracting from Dates</h4>
<p>Now, until I remembered that + means to different operations in Javascript, I was rather shocked that I could easily subtract from Dates, but not add.</p>
<pre><code>new Date() - (1000 * 60 * 60 * 24 * 7)</code></pre>
<p>Result is a number: 1252714884521. This does the proper math, but not everything I had hoped and dreamed for. No matter, receiving a number is certainly a result I could expect, as opposed to the string joining from addition.</p>
